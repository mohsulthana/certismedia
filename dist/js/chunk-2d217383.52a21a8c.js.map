{"version":3,"sources":["webpack:///./src/views/pages/Dashboard.vue?8f72","webpack:///src/views/pages/Dashboard.vue","webpack:///./src/views/pages/Dashboard.vue?1bdb","webpack:///./src/views/pages/Dashboard.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","model","value","callback","$$v","dateRange","expression","enabled","columns","dashboard","collapsable","on","onRowClick","scopedSlots","_u","key","fn","props","_v","column","field","_s","parseFloat","row","ctr","toFixed","winrate","formattedRow","staticRenderFns","components","VCard","VBtn","VCardText","VCardTitle","VDataTable","DatePicker","VueGoodTable","data","expanded","from","to","singleExpand","headers","lines","watch","newVal","fetchImpressions","methods","console","log","params","axios","mounted","component"],"mappings":"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","file":"js/chunk-2d217383.52a21a8c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('vx-card',{staticClass:\"overflow-hidden\",attrs:{\"title\":\"Dashboard\"}},[_c('template',{slot:\"actions\"},[_c('date-picker',{attrs:{\"placeholder\":\"Filter date\",\"valueType\":\"format\",\"clearable\":true,\"range-separator\":' to ',\"range\":\"\",\"confirm-text\":'Filter',\"confirm\":true},model:{value:(_vm.dateRange),callback:function ($$v) {_vm.dateRange=$$v},expression:\"dateRange\"}})],1),_c('vue-good-table',{attrs:{\"expandOptions\":{ enabled: true },\"columns\":_vm.columns,\"rows\":_vm.dashboard,\"group-options\":{\n        enabled: true,\n        collapsable: true,\n      }},on:{\"on-row-click\":_vm.onRowClick},scopedSlots:_vm._u([{key:\"expanded-row\",fn:function(props){return [_c('div',[_vm._v(\"Hello\")])]}},{key:\"table-row\",fn:function(props){return [(props.column.field == 'ctr')?_c('span',[_vm._v(\"\\n          \"+_vm._s(((parseFloat(props.row.ctr).toFixed(2)) + \"%\"))+\"\\n        \")]):(props.column.field == 'winrate')?_c('span',[_vm._v(\"\\n          \"+_vm._s(((parseFloat(props.row.winrate).toFixed(2)) + \"%\"))+\"\\n        \")]):_c('span',[_vm._v(\"\\n          \"+_vm._s(props.formattedRow[props.column.field])+\"\\n        \")])]}}])})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- Vue Component -->\n\n<template>\n  <div>\n    <vx-card title=\"Dashboard\" class=\"overflow-hidden\">\n      <template slot=\"actions\">\n        <date-picker\n          placeholder=\"Filter date\"\n          v-model=\"dateRange\"\n          valueType=\"format\"\n          :clearable=\"true\"\n          :range-separator=\"' to '\"\n          range\n          :confirm-text=\"'Filter'\"\n          :confirm=\"true\"\n        ></date-picker>\n      </template>\n      <vue-good-table\n        :expandOptions=\"{ enabled: true }\"\n        :columns=\"columns\"\n        :rows=\"dashboard\"\n        :group-options=\"{\n          enabled: true,\n          collapsable: true,\n        }\"\n        @on-row-click=\"onRowClick\"\n      >\n        <template slot=\"expanded-row\" slot-scope=\"props\">\n          <div>Hello</div>\n        </template>\n        <template slot=\"table-row\" slot-scope=\"props\">\n          <span v-if=\"props.column.field == 'ctr'\">\n            {{ `${parseFloat(props.row.ctr).toFixed(2)}%` }}\n          </span>\n          <span v-else-if=\"props.column.field == 'winrate'\">\n            {{ `${parseFloat(props.row.winrate).toFixed(2)}%` }}\n          </span>\n          <span v-else>\n            {{ props.formattedRow[props.column.field] }}\n          </span>\n        </template>\n      </vue-good-table>\n    </vx-card>\n    <!-- <v-data-table\n      :headers=\"headers\"\n      :items=\"dashboard\"\n      :single-expand=\"singleExpand\"\n      :expanded.sync=\"expanded\"\n      item-key=\"campaign_name\"\n      show-expand\n      :loading=\"this.$root.loadingWorking\"\n      loading-text=\"Loading... Please wait\"\n      class=\"elevation-5\"\n    >\n      <template v-slot:item.ctr=\"{ item }\">\n        {{ `${item.ctr.toFixed(2)}%` }}\n      </template>\n      <template v-slot:item.winrate=\"{ item }\">\n        {{ `${item.winrate.toFixed(2)}%` }}\n      </template>\n      <template v-slot:top>\n        <v-toolbar flat color=\"white\">\n          <v-toolbar-title>Dashboard</v-toolbar-title>\n          <v-spacer></v-spacer>\n          <date-picker\n            placeholder=\"Filter date\"\n            v-model=\"dateRange\"\n            valueType=\"format\"\n            :clearabl=\"true\"\n            :range-separator=\"' to '\"\n            range\n            :confirm-text=\"'Filter'\"\n            :confirm=\"true\"\n          ></date-picker>\n        </v-toolbar>\n      </template>\n      <template v-slot:expanded-item=\"{ headers, item }\">\n        <td class=\"text-start text-warning\" :colspan=\"headers.length\">\n          <vs-row>\n            <v-simple-table>\n              <template v-slot:default>\n                <tbody>\n                  <tr v-for=\"(line, index) in item.lines\" :key=\"index\">\n                    <td class=\"text-start\">{{ item.lines[index].line_name.slice(0, 50) }}...</td>\n                    <td class=\"text-start\">{{ item.lines[index].impressions }}</td>\n                    <td class=\"text-start\">{{ item.lines[index].clicks }}</td>\n                    <td class=\"text-start\">{{ item.lines[index].ctr }}</td>\n                    <td class=\"text-start\">{{ item.lines[index].view }}</td>\n                    <td class=\"text-start\">{{ item.lines[index].completed_views }}</td>\n                    <td class=\"text-start\">{{ `${item.winrate.toFixed(2)}%` }}</td>\n                    <td class=\"text-start\">{{ item.lines[index].impressions }}</td>\n                    <td class=\"text-start\">{{ item.lines[index].impressions }}</td>\n                    <td class=\"text-start\">{{ item.lines[index].impressions }}</td>\n                  </tr>\n                </tbody>\n              </template>\n            </v-simple-table>\n          </vs-row>\n        </td>\n      </template>\n    </v-data-table> -->\n  </div>\n</template>\n\n<script>\nimport { VCard, VCardText, VCardTitle, VDataTable, VBtn } from \"vuetify/lib\";\nimport axios from \"@/axios\";\nimport DatePicker from \"vue2-datepicker\";\nimport { VueGoodTable } from \"vue-good-table\";\nimport \"vue-good-table/dist/vue-good-table.css\";\nimport \"vue2-datepicker/index.css\";\n\nexport default {\n  components: {\n    VCard,\n    VBtn,\n    VCardText,\n    VCardTitle,\n    VDataTable,\n    DatePicker,\n    VueGoodTable,\n  },\n  data() {\n    return {\n      columns: [\n        {\n          label: \"Campaign\",\n          field: \"campaign_name\",\n        },\n        {\n          label: \"Impressions\",\n          field: \"impressions\",\n          type: \"number\",\n        },\n        {\n          label: \"Clicks\",\n          field: \"clicks\",\n          type: \"number\",\n        },\n        {\n          label: \"CTR\",\n          field: \"ctr\",\n          type: \"percentage\",\n        },\n        {\n          label: \"Views\",\n          field: \"views\",\n          type: \"number\",\n        },\n        {\n          label: \"Completed Views\",\n          field: \"completed_views\",\n          type: \"number\",\n        },\n        {\n          label: \"Win Rate\",\n          field: \"winrate\",\n          type: \"percentage\",\n        },\n        {\n          label: \"Landings\",\n          field: \"landings\",\n          type: \"number\",\n        },\n        {\n          label: \"Registrations\",\n          field: \"registrations\",\n          type: \"number\",\n        },\n        {\n          label: \"Subscriptions\",\n          field: \"subscriptions\",\n          type: \"number\",\n        },\n      ],\n      expanded: [],\n      dateRange: {},\n      from: \"\",\n      to: \"\",\n      singleExpand: false,\n      headers: [\n        { text: \"\", value: \"data-table-expand\" },\n        {\n          text: \"Campaign Name\",\n          align: \"left\",\n          sortable: false,\n          value: \"campaign_name\",\n        },\n        { text: \"Impressions\", value: \"impressions\" },\n        { text: \"Clicks\", value: \"clicks\" },\n        { text: \"CTR\", value: \"ctr\" },\n        { text: \"Views\", value: \"views\" },\n        { text: \"Completed Views\", value: \"completed_views\" },\n        { text: \"Win Rate\", value: \"winrate\" },\n        { text: \"Landings\", value: \"landings\" },\n        { text: \"Registrations\", value: \"registrations\" },\n        { text: \"Subscriptions\", value: \"subscriptions\" },\n      ],\n      dashboard: [],\n      lines: [],\n    };\n  },\n  watch: {\n    dateRange: function (newVal, oldVal) {\n      this.dashboard = [];\n      if (newVal[0] == null && newVal[0] == null) {\n        this.from = \"\";\n        this.to = \"\";\n      } else {\n        this.from = newVal[0];\n        this.to = newVal[1];\n      }\n      this.fetchImpressions();\n    },\n  },\n  methods: {\n    onRowClick(params) {\n      console.log(params);\n    },\n    fetchImpressions() {\n      const idUser = this.$store.state.AppActiveUser.id;\n      const username = this.$store.state.AppActiveUser.username;\n      const table = username + idUser;\n\n      axios\n        .get(`Reporting/dashboard/${table}?from=${this.from}&to=${this.to}`)\n        .then((response) => {\n          response.data.forEach((element) => {\n            this.dashboard.push({\n              children: element.lines,\n              clicks: parseFloat(element.clicks),\n              impressions: parseFloat(element.impressions),\n              campaign_name: element.campaign_name,\n              completed_views: parseFloat(element.completed_views),\n              views: parseFloat(element.views),\n              ctr:\n                element.impressions == null || element.clicks == null\n                  ? 0\n                  : parseInt(element.clicks) / parseInt(element.impressions),\n              landings:\n                element.landings == null ? 0 : parseFloat(element.landings),\n              winrate:\n                element.impressions == null || element.bids == null\n                  ? 0\n                  : parseFloat(element.impressions) / parseFloat(element.bids),\n              registrations:\n                element.registrations == null\n                  ? 0\n                  : parseFloat(element.registrations),\n              subscriptions:\n                element.subscriptions == null\n                  ? 0\n                  : parseFloat(element.subscriptions),\n            });\n          });\n\n          this.dashboard.map((element) => {\n            element.children.map((child) => {\n              child.campaign_name = child.line_name;\n              child.winrate =\n                child.impressions == null || child.bids == null\n                  ? 0\n                  : parseFloat(child.impressions) / parseFloat(child.bids);\n              child.ctr =\n                child.clicks == null || child.impressions == null\n                  ? 0\n                  : parseFloat(child.clicks) / parseFloat(child.impressions);\n              child.winrate =\n                child.winrate == Infinity ? 0 : parseFloat(child.winrate);\n              child.ctr = child.ctr == Infinity ? 0 : parseFloat(child.ctr);\n              delete child.line_name;\n            });\n          });\n        });\n    },\n  },\n  mounted() {\n    this.fetchImpressions();\n  },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.vue?vue&type=template&id=6c592292&\"\nimport script from \"./Dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}